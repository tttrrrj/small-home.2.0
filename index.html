<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互动动画</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-direction: column;
            height: 100vh;
            width: 100%;
            padding-top: 20px;
        }
        .shape {
            position: absolute;
            width: 50px;
            height: 50px;
            transition: transform 0.5s ease-in-out; /* 动画移动速度改为 0.5秒 */
            cursor: pointer;
        }
        .circle {
            border-radius: 50%;
        }
        .square {
            /* 方块默认颜色，不再定义 */
        }
        #title {
            font-size: 24px;
            color: #333;
            font-weight: bold;
            margin-bottom: 10px;
            display: none; /* 隐藏头衔文字 */
        }
        .shape:hover {
            transform: scale(1.2) rotate(15deg);
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="title"></div>

    <!-- 多个圆形和方块 -->
    <div class="shape square" id="square1"></div>
    <div class="shape square" id="square2"></div>
    <div class="shape square" id="square3"></div>
    <div class="shape square" id="square4"></div>
    <div class="shape circle" id="circle1"></div>
    <div class="shape circle" id="circle2"></div>
    <div class="shape circle" id="circle3"></div>
    <div class="shape circle" id="circle4"></div>

    <script>
        const squares = [
            document.getElementById('square1'),
            document.getElementById('square2'),
            document.getElementById('square3'),
            document.getElementById('square4')
        ];
        const circles = [
            document.getElementById('circle1'),
            document.getElementById('circle2'),
            document.getElementById('circle3'),
            document.getElementById('circle4')
        ];
        const title = document.getElementById('title');
        let circleClicks = 0;
        let squareClicks = 0;
        let taskCompleted = false;

        // 随机颜色函数（RGB）
        function getRandomColor() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            return `rgb(${r}, ${g}, ${b})`;
        }

        // 随机位置函数
        function getRandomPosition() {
            const x = Math.random() * (window.innerWidth - 50); // 保证方块和圆不会超出屏幕
            const y = Math.random() * (window.innerHeight - 100); // 留出空间给顶部内容
            return { x, y };
        }

        // 设置方块和圆的位置和颜色
        function setRandomPositionsAndColors() {
            squares.forEach(square => {
                square.style.left = `${getRandomPosition().x}px`;
                square.style.top = `${getRandomPosition().y}px`;
                square.style.backgroundColor = getRandomColor(); // 随机颜色
            });

            circles.forEach(circle => {
                circle.style.left = `${getRandomPosition().x}px`;
                circle.style.top = `${getRandomPosition().y}px`;
                circle.style.backgroundColor = getRandomColor(); // 随机颜色
            });
        }

        // 任务头衔（增加了更多可能的完成条件）
        const taskTitles = {
            "circle10": "圆形征服者（Circle Conqueror）",
            "block10": "方块霸主（Block Overlord）",
            "circle9_block1": "圆块双重手（Dual Clicker）",
            "block9_circle1": "方圆混搭者（Block-Circle Fusionist）",
            "circle5_bounce": "反弹大师（Bounce Master）",
            "block5_bounce": "方块反击者（Block Bouncer）",
            "circle5_block5": "连环挑战者（Combo Challenger）",
            "circle_block_alternating10": "完美协调者（Perfect Synchronizer）",
            "circle_block10": "极限战士（Extreme Warrior）",
            "circle5_block5_circle1": "圆块再圆（Circle-Block Reborn）",
            "block10_circleBounce": "反弹征服者（Bounce Conqueror）",
            "circle_block30": "节奏大师（Rhythm Master）"
        };

        // 更新任务
        function updateTask() {
            if (circleClicks >= 10 && squareClicks < 10) {
                title.textContent = taskTitles.circle10;
                title.style.display = 'block';
            } else if (squareClicks >= 10 && circleClicks < 10) {
                title.textContent = taskTitles.block10;
                title.style.display = 'block';
            } else if (circleClicks >= 9 && squareClicks >= 1) {
                title.textContent = taskTitles.circle9_block1;
                title.style.display = 'block';
            } else if (squareClicks >= 9 && circleClicks >= 1) {
                title.textContent = taskTitles.block9_circle1;
                title.style.display = 'block';
            } else if (circleClicks >= 5) {
                title.textContent = taskTitles.circle5_bounce;
                title.style.display = 'block';
            } else if (squareClicks >= 5) {
                title.textContent = taskTitles.block5_bounce;
                title.style.display = 'block';
            } else if (circleClicks >= 5 && squareClicks >= 5) {
                title.textContent = taskTitles.circle5_block5;
                title.style.display = 'block';
            }
        }

        // 点击事件，方块和圆会更新点击次数
        squares.forEach(square => {
            square.addEventListener('click', () => {
                if (taskCompleted) return;
                squareClicks++;
                updateTask();
                checkTaskCompletion();
            });
        });

        circles.forEach(circle => {
            circle.addEventListener('click', () => {
                if (taskCompleted) return;
                circleClicks++;
                updateTask();
                checkTaskCompletion();
            });
        });

        // 检查任务是否完成
        function checkTaskCompletion() {
            // 在任务完成时显示头衔，玩家可以自由探索
            if (circleClicks >= 10 && squareClicks >= 10 && !taskCompleted) {
                taskCompleted = true;
                title.textContent = "任务完成！";
                title.style.display = 'block';
            }
        }

        // 定时随机移动方块和圆形
        setInterval(setRandomPositionsAndColors, 2000); // 每2秒触发一次位置更新

        // 初始位置和颜色
        setRandomPositionsAndColors();

        // 鼠标拖动功能
        let isDragging = false;
        let currentShape = null;
        let offsetX, offsetY;

        function mouseDownHandler(e) {
            isDragging = true;
            currentShape = e.target;
            offsetX = e.clientX - currentShape.getBoundingClientRect().left;
            offsetY = e.clientY - currentShape.getBoundingClientRect().top;
            currentShape.style.transition = 'none'; // 禁止拖动时的过渡动画
        }

        function mouseMoveHandler(e) {
            if (!isDragging || !currentShape) return;
            const x = e.clientX - offsetX;
            const y = e.clientY - offsetY;
            currentShape.style.left = `${x}px`;
            currentShape.style.top = `${y}px`;
        }

        function mouseUpHandler() {
            isDragging = false;
            if (currentShape) {
                currentShape.style.transition = 'transform 0.5s ease-in-out'; // 恢复过渡动画
            }
        }

        // 为方块和圆形添加鼠标拖动事件
        squares.forEach(square => {
            square.addEventListener('mousedown', mouseDownHandler);
        });

        circles.forEach(circle => {
            circle.addEventListener('mousedown', mouseDownHandler);
        });

        // 全局添加拖动事件
        document.addEventListener('mousemove', mouseMoveHandler);
        document.addEventListener('mouseup', mouseUpHandler);
    </script>
</body>
</html>

